import{a as oe}from"./chunk-5K454CJT.js";import{d as Q,e as W,f as X,g as ee,h as te,i as ie,m as O}from"./chunk-YAA4BFPX.js";import{b as I,f as ae}from"./chunk-CLNOKXZC.js";import{b as G,c as b}from"./chunk-QNR4T3HR.js";import{n as T}from"./chunk-VGYDPLI3.js";import{C as z,J as H,j as U,k as w,l as N,m as k,n as q,o as S,p as j,q as D,r as R,s as $,t as Z,u as B,w as A,y as Y}from"./chunk-IRB5KGML.js";import{E as L}from"./chunk-YKIFQ2TL.js";import{$b as d,Bb as u,Ea as M,Fa as x,Gb as p,Kb as o,Kc as E,Lb as a,Mb as f,Oa as K,Ob as V,Rb as v,Tb as g,dc as P,gb as s,hb as m,pb as y,tb as C,ua as _,v as h,zb as c}from"./chunk-3MIHH2IE.js";function ge(e,t){e&1&&f(0,"mat-spinner",1)}function he(e,t){e&1&&(o(0,"mat-error",5),d(1," New password is required "),a())}function _e(e,t){e&1&&(o(0,"mat-error",6),d(1," New password is invalid "),a())}function Ce(e,t){e&1&&(o(0,"mat-error",9),d(1," Password is required "),a())}function Pe(e,t){e&1&&(o(0,"mat-error",10),d(1," Email is invalid "),a())}function Ee(e,t){if(e&1&&(o(0,"div",2)(1,"mat-form-field")(2,"mat-label",3),d(3,"New Password"),a(),f(4,"input",4),c(5,he,2,0,"mat-error",5)(6,_e,2,0,"mat-error",6),a(),o(7,"mat-form-field")(8,"mat-label",7),d(9,"Confirm Password"),a(),f(10,"input",8),c(11,Ce,2,0,"mat-error",9)(12,Pe,2,0,"mat-error",10),a()(),o(13,"button",11),d(14," Update Password "),a()),e&2){let r=g();s(4),u("formControl",r.newPassword),s(),p(5,r.newPassword.hasError("required")?5:-1),s(),p(6,r.newPassword.hasError("pattern")?6:-1),s(4),u("formControl",r.confirmPassword),s(),p(11,r.confirmPassword.hasError("required")?11:-1),s(),p(12,r.passwordMatches?-1:12),s(),u("disabled",!r.formGroup.valid&&!r.passwordMatches)}}var ne=(()=>{let t=class t{constructor(n,i,l,F,J){this.store=n,this.actions$=i,this.router=l,this.ngZone=F,this.snackbarService=J,this.newPassword=new S("",[w.required,w.minLength(8),w.pattern(oe)]),this.confirmPassword=new S("",[w.required]),this.isLoading=C(!1),this.formGroup=new q({newPassword:this.newPassword,confirmPassword:this.confirmPassword})}ngOnInit(){this.handleUpdatePasswordSuccess().subscribe(),this.handleUpdatePasswordFailure().subscribe()}get passwordMatches(){return this.newPassword.value===""||this.confirmPassword.value===""?!1:this.newPassword.value===this.confirmPassword.value}onSubmit(){this.formGroup.valid&&(this.isLoading.update(()=>!0),this.store.dispatch(ee({password:this.newPassword.value})))}handleUpdatePasswordSuccess(){return this.actions$.pipe(b(te),h(()=>{this.isLoading.update(()=>!1),this.snackbarService.openSnackBar("Password updated successfully. You will be redirected to login screen."),this.navigateToLogin()}))}handleUpdatePasswordFailure(){return this.actions$.pipe(b(ie),h(n=>{this.isLoading.update(()=>!1);let{error:i}=n;this.snackbarService.openSnackBar(i.message)}))}navigateToLogin(){this.ngZone.run(()=>{setTimeout(()=>{this.router.navigate(["login"])},2e3)})}};t.\u0275fac=function(i){return new(i||t)(m(T),m(G),m(I),m(y),m(O))},t.\u0275cmp=_({type:t,selectors:[["app-update-password-form"]],standalone:!0,features:[P],decls:3,vars:2,consts:[["data-update-password-form","",1,"form","update-password-form-container",3,"ngSubmit","formGroup"],["data-spinner",""],[1,"form-group"],["aria-label","New Password"],["type","password","matInput","","aria-placeholder","enter new password","aria-required","true","placeholder","Enter new password","id","newPasswordField","data-new-password-field","",3,"formControl"],["aria-errormessage","newPasswordField","data-validate-email-error-field",""],["aria-invalid","New password is invalid","data-validate-email-error-field",""],["aria-label","Confirm Password"],["type","password","matInput","","aria-placeholder","enter new password","placeholder","Enter your new password to confirm","aria-required","true","data-confirm-password-field","",3,"formControl"],["aria-errormessage","Confirm Password is required","data-validate-email-error-field",""],["aria-invalid","Password doesnt match","data-validate-email-error-field",""],["aria-label","Update Password button","mat-flat-button","","color","primary","type","submit","data-update-password-btn","",1,"update-password-btn",3,"disabled"]],template:function(i,l){i&1&&(o(0,"form",0),v("ngSubmit",function(){return l.onSubmit()}),c(1,ge,1,0,"mat-spinner",1)(2,Ee,15,7),a()),i&2&&(u("formGroup",l.formGroup),s(),p(1,l.isLoading()?1:2))},dependencies:[$,j,U,N,k,D,R,E,H,A,Z,B,Y,L,z],styles:[".update-password-form-container[_ngcontent-%COMP%]{height:200px}.update-password-form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:90%}.update-password-form-container[_ngcontent-%COMP%]   .update-password-btn[_ngcontent-%COMP%]{width:100%!important}"]});let e=t;return e})();function be(e,t){e&1&&f(0,"mat-spinner",1)}function Fe(e,t){e&1&&(o(0,"mat-error",5),d(1," Email is required "),a())}function Se(e,t){e&1&&(o(0,"mat-error",8),d(1," Email is invalid "),a())}function Me(e,t){if(e&1){let r=V();o(0,"div",2)(1,"mat-form-field")(2,"mat-label",3),d(3,"Validate Email"),a(),f(4,"input",4),c(5,Fe,2,0,"mat-error",5)(6,Se,2,0),a()(),o(7,"button",6),d(8," Validate Email "),a(),o(9,"button",7),v("click",function(){M(r);let i=g();return x(i.navigateToLogin())}),d(10," Return to Login "),a()}if(e&2){let r=g();s(4),u("formControl",r.validateEmailField),s(),p(5,r.validateEmailField.hasError("required")?5:r.validateEmailField.hasError("pattern")?6:-1),s(2),u("disabled",!r.formGroup.valid)}}var se=(()=>{let t=class t{constructor(n,i,l,F,J){this.store$=n,this.actions$=i,this.snackService=l,this.ngZone=F,this.router=J,this.emailValidated=new K,this.isLoading=C(!1),this.validateEmailField=new S("",[w.required,w.email]),this.formGroup=new q({validateEmailField:this.validateEmailField})}ngOnInit(){this.handleValidateEmailSuccess().subscribe(),this.handleValidateEmailError().subscribe()}onSubmit(){this.formGroup.valid&&(this.isLoading.update(()=>!0),this.store$.dispatch(Q({email:this.validateEmailField.value})))}navigateToLogin(){this.ngZone.run(()=>{this.router.navigate(["/login"])})}handleValidateEmailSuccess(){return this.actions$.pipe(b(W),h(()=>{this.isLoading.update(()=>!1),this.emailValidated.emit(!0)}))}handleValidateEmailError(){return this.actions$.pipe(b(X),h(n=>{this.isLoading.update(()=>!1);let{error:i}=n;this.snackService.openSnackBar(i.message)}))}};t.\u0275fac=function(i){return new(i||t)(m(T),m(G),m(O),m(y),m(I))},t.\u0275cmp=_({type:t,selectors:[["app-validate-email-form"]],outputs:{emailValidated:"emailValidated"},standalone:!0,features:[P],decls:3,vars:2,consts:[["data-validate-email-form","",1,"validate-email-form-container",3,"ngSubmit","formGroup"],["data-spinner",""],[1,"form-group"],["mat-label","Validate Email"],["matInput","","aria-placeholder","Enter your email","placeholder","Enter your email","aria-required","true","id","validateEmailField","data-validate-email-field","",3,"formControl"],["aria-errormessage","validateEmailField","data-validate-email-error-field",""],["aria-label","Validate email button","mat-flat-button","","color","primary","type","submit","data-validate-email-btn","",1,"validate-email-btn",3,"disabled"],["aria-label","Return to login button","mat-flat-button","","color","primary","type","button","data-return-to-login-btn","",1,"return-to-login-btn",3,"click"],["aria-errormessage","validateEmailField","aria-invalid","true","data-validate-email-error-field",""]],template:function(i,l){i&1&&(o(0,"form",0),v("ngSubmit",function(){return l.onSubmit()}),c(1,be,1,0,"mat-spinner",1)(2,Me,11,3),a()),i&2&&(u("formGroup",l.formGroup),s(),p(1,l.isLoading()?1:2))},dependencies:[$,j,U,N,k,D,R,E,H,A,Z,B,Y,L,z],styles:[".validate-email-form-container[_ngcontent-%COMP%]   .validate-email-btn[_ngcontent-%COMP%], .validate-email-form-container[_ngcontent-%COMP%]   .return-to-login-btn[_ngcontent-%COMP%]{width:100%!important}.validate-email-form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}.validate-email-form-container[_ngcontent-%COMP%]   .return-to-login-btn[_ngcontent-%COMP%]{width:100%!important;margin-top:20px}"]});let e=t;return e})();function xe(e,t){e&1&&f(0,"app-update-password-form")}function ye(e,t){if(e&1){let r=V();o(0,"app-validate-email-form",2),v("emailValidated",function(i){M(r);let l=g();return x(l.onEmailValidated(i))}),a()}}var tt=(()=>{let t=class t{constructor(){this.showUpdatePasswordForm=C(!1)}onEmailValidated(n){n&&this.showUpdatePasswordForm.update(()=>!0)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=_({type:t,selectors:[["app-forgot-password"]],standalone:!0,features:[P],decls:5,vars:1,consts:[["data-forgot-password-container","",1,"forgot-password-container"],["aria-label","Forgot Password Section",1,"title"],[3,"emailValidated"]],template:function(i,l){i&1&&(o(0,"div",0)(1,"h1",1),d(2,"Forgot Password"),a(),c(3,xe,1,0,"app-update-password-form")(4,ye,1,0),a()),i&2&&(s(3),p(3,l.showUpdatePasswordForm()?3:4))},dependencies:[ne,se,ae,E],styles:[".forgot-password-container[_ngcontent-%COMP%]{align-items:center;display:flex;height:100vh;justify-content:center;width:100vw;flex-direction:column}"]});let e=t;return e})();export{tt as ForgotPasswordComponent};
