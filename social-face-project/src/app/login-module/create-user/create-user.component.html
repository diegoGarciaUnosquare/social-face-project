<section class="create-user-container" data-create-user-container="">
    <mat-stepper class="user-creation-stepper" [orientation]="(stepperOrientation | async)!" linear #createUserStepper
        data-create-user-stepper="">
        <mat-step [stepControl]="createAccountFormGroup" aria-label="Account creation Form"
            label="Fill information for account creation">
            <form [formGroup]="createAccountFormGroup" (ngSubmit)="onSubmit()" data-create-user-form="">
                <div class="form-group-container">
                    <mat-form-field>
                        <mat-label aria-label="Enter username">Username</mat-label>
                        <input type="text" matInput aria-placeholder="Enter Username" placeholder="Enter your username"
                            [formControl]="username" aria-required="true" id="usernameField" data-username-field="">
                        @if (username.hasError('required')) {
                            <mat-error aria-errormessage="usernameField" data-username-error-field="">
                                Username is required
                            </mat-error>
                        }
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label aria-label="Enter password">Password</mat-label>
                        <input type="password" matInput aria-placeholder="Enter your Password"
                            placeholder="Enter your password" [formControl]="password" id="passwordField"
                            aria-required="true" data-password-field="">
                        @if (password.hasError('required')) {
                            <mat-error aria-errormessage="passwordField" data-password-error-field="">
                                Password is required
                            </mat-error>
                        }
                        @if (password.hasError('minlength')) {
                        <mat-error aria-invalid="true" aria-errormessage="passwordField"
                                data-password-error-field="">
                                Password must be at least 8 characters
                            </mat-error>
                        } @else if (password.hasError('pattern')) {
                            <mat-error aria-invalid="true" aria-errormessage="passwordField" data-password-error-field="">
                                Password must contain at least one number and one uppercase letter
                            </mat-error>
                        }
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label aria-label="Email">Email</mat-label>
                        <input type="email" matInput aria-placeholder="Enter your Email" placeholder="Enter your email"
                            [formControl]="email" id="emailField" aria-required="true" data-email-field="">
                        @if (email.hasError('required')) {
                        <mat-error aria-errormessage="emailField" data-email-error-field="">
                            Email is required
                        </mat-error>
                        } @else if (email.hasError('pattern')) {
                            <mat-error aria-errormessage="emailField" aria-invalid="true" data-email-error-field="">
                                Email is invalid
                            </mat-error>
                        }
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label aria-label="Enter first name">First Name</mat-label>
                        <input type="text" matInput aria-placeholder="Enter first name"
                            placeholder="Enter your first name" aria-required="true" id="firstNameField"
                            [formControl]="firstName"
                            aria-required="true" data-first-name-field="">
                        @if (firstName.hasError('required')) {
                            <mat-error aria-errormessage="firstNameField" data-first-name-error="">
                                First Name is required
                            </mat-error>
                        }
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label aria-label="Enter last name">Last Name</mat-label>
                        <input type="text" matInput aria-placeholder="Enter Last Name"
                            placeholder="Enter your last name" [formControl]="lastName" id="lastNameField"
                            aria-required="true" data-last-name-field="">
                        @if (lastName.hasError('required')) {
                            <mat-error aria-errormessage="lastNameField" data-last-name-error-field="">
                                Last Name is required
                            </mat-error>
                        }
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label aria-label="Enter date of birth">Date of Birth</mat-label>
                        <input type="date" matInput aria-placeholder="Enter Date of Birth"
                            placeholder="Enter your date of birth" [formControl]="birthDate" id="dateOfBirthField"
                            aria-required="true" data-birth-date-field="">
                        @if (birthDate.hasError('required')) {
                            <mat-error aria-errormessage="dateOfBirthField" data-birth-date-error-field="">
                                Date of Birth is required
                            </mat-error>
                        }
                    </mat-form-field>
                    <mat-radio-group [formControl]="notificationPreference" aria-label="Select notification preference">
                        <mat-radio-button aria-label="Email Notifications" aria-checked="true"
                            data-notification-email-field="" value="1">
                            Email Notifications
                        </mat-radio-button>
                        <mat-radio-button aria-label="Browser Notifications" aria-checked="false"
                            data-notification-browser-field="" value="2">
                            Browser Notifications
                        </mat-radio-button>
                    </mat-radio-group>
                </div>
                <div>
                    @if (isLoading) {
                        <mat-spinner aria-label="Loading..." data-spinner=""></mat-spinner>
                    } @else {
                        <button aria-label="Navigate to next step" type="submit" mat-flat-button color="primary" data-next-button="">
                            Next
                        </button>
                    }

                </div>
            </form>
        </mat-step>
        <mat-step aria-label="Account Creation - Done Step" label="Done!">
            <h2 class="account-created-title" data-account-created-title=""> Account Created! </h2>
            <a aria-label="Go to login page button" mat-button [routerLink]="['/login']" data-navigate-login-button="">
                Click here to navigate back to login screen.
            </a>
        </mat-step>
    </mat-stepper>
</section>