import{a as G,d as L,g as V,j,n as z}from"./chunk-SVVZDTD2.js";import{n as O,o as w,p as D}from"./chunk-UO3TCGKE.js";import{E as st,a as S,b as N,c as I,d as U,e as B,f as K,g as k,h as R,i as H,j as J,k as Q,l as W,m as X,n as Y,o as Z,p as tt,q as et,r as nt,t as ot,v as it,x as at}from"./chunk-76VXPCNJ.js";import{H as q}from"./chunk-RMY26TJC.js";import{$b as u,Ca as A,Da as T,Eb as C,Gb as P,Hb as b,Ib as i,Ic as F,J as y,Jb as a,Kb as g,Mb as $,Pb as v,Rb as c,Zb as d,bc as _,eb as m,fb as M,i as E,rb as p,sa as h,u as x,xb as f,zb as l}from"./chunk-E7CHWM35.js";var rt=D("feed"),mt=w(rt,t=>t.posts?t.posts:[]),dt=w(rt,t=>t.ads?t.ads:null);var lt=(()=>{let e=class e{constructor(){this.ad=null,this.index=0,this.elementId=p("")}ngOnInit(){this.elementId.update(()=>`ad-container-${this.index}`)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=h({type:e,selectors:[["app-ad"]],inputs:{ad:"ad",index:"index"},standalone:!0,features:[_],decls:8,vars:3,consts:[[1,"ad-container",3,"id"],["aria-label","advertising title",1,"ad-title"],["aria-label","advertising message",1,"ad-description"],["mat-card-image","","src","https://material.angular.io/assets/img/examples/shiba2.jpg","aria-label","Advertising image","alt","Photo for advertising"]],template:function(r,o){r&1&&(i(0,"mat-card",0)(1,"mat-card-title")(2,"h2",1),d(3),a()(),i(4,"mat-card-content")(5,"p",2),d(6),a()(),g(7,"img",3),a()),r&2&&(l("id",o.elementId()),m(3),u(" ",o.ad==null?null:o.ad.title," "),m(3),u(" ",o.ad==null?null:o.ad.description," "))},dependencies:[R,S,I,k,N],styles:[".ad-container[_ngcontent-%COMP%]   h2.ad-title[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;padding-left:10px;padding-top:10px}.ad-container[_ngcontent-%COMP%]   p.ad-description[_ngcontent-%COMP%]{color:#fff;font-size:1rem;padding-bottom:15px}"]});let t=e;return t})();var gt=(t,e)=>e.id;function ht(t,e){t&1&&g(0,"img",2)}function _t(t,e){if(t&1&&(i(0,"p",10),d(1),a()),t&2){let s=e.$implicit;m(),u(" ",s.content," ")}}function xt(t,e){if(t&1&&(i(0,"div"),P(1,_t,2,1,"p",10,gt),a()),t&2){let s=c();m(),b(s.post==null?null:s.post.comments)}}function Mt(t,e){t&1&&(i(0,"mat-error",14),d(1,"Comment is required"),a())}function Pt(t,e){if(t&1){let s=$();i(0,"form",11),v("keyup.enter",function(){A(s);let r=c();return T(r.onSubmit())}),i(1,"mat-form-field",12)(2,"textarea",13),d(3,"                    "),a(),f(4,Mt,2,0,"mat-error",14),a()()}if(t&2){let s=c();l("formGroup",s.formGroup),m(2),l("formControl",s.addCommentField),m(2),C(4,s.addCommentField.hasError("required")?4:-1)}}var ct=(()=>{let e=class e{constructor(n){this.store=n,this.post=null,this.index=0,this.addCommentField=new Y("",J.required),this.commentsAmount=p(0),this.elementId=p(""),this.showCommentsForm=p(!1),this.likes=p(0),this.formGroup=new X({addCommentField:this.addCommentField})}ngOnInit(){this.likes.set(this.post?.likes||0),this.commentsAmount.set(this.post?.comments.length||0),this.elementId.update(()=>`post-container-${this.index}`)}onSubmit(){this.formGroup.valid&&(this.store.dispatch(j({postId:this.post.id,content:this.addCommentField.value,userId:this.post.userId})),this.onAddComment())}onLike(){this.store.dispatch(V({postId:this.post.id}))}onAddComment(){this.showCommentsForm.update(n=>!n)}};e.\u0275fac=function(r){return new(r||e)(M(O))},e.\u0275cmp=h({type:e,selectors:[["app-post"]],inputs:{post:"post",index:"index"},standalone:!0,features:[_],decls:19,vars:7,consts:[[1,"post-container",3,"id"],["aria-label","message of the post",1,"post-content"],["mat-card-image","","src","https://material.angular.io/assets/img/examples/shiba2.jpg","alt","Photo of post"],[1,"post-amounts-container"],["aria-label","Message to show how many likes the post has.",1,"post-like-amount"],["aria-label","Message to show how many comments the post has.",1,"post-comments-amount"],[3,"formGroup"],["aria-label","post action button section"],["mat-button","","data-post-like-btn","","aria-label","Like button",3,"click"],["mat-button","","data-post-comment-btn","","aria-label","Add comment button",3,"click"],[1,"post-text-message"],[3,"keyup.enter","formGroup"],[1,"post-comment-field"],["matInput","","aria-required","true","id","addCommentFieldInput","type","text","data-add-comment-field","",3,"formControl"],["aria-errormessage","addCommentFieldInput","aria-label","Comment is required error message"]],template:function(r,o){r&1&&(i(0,"mat-card",0)(1,"mat-card-subtitle")(2,"p",1),d(3),a()(),f(4,ht,1,0,"img",2),i(5,"mat-card-content"),f(6,xt,3,0,"div"),i(7,"div",3)(8,"span",4),d(9),a(),i(10,"span",5),d(11),a()()(),i(12,"mat-card-footer"),f(13,Pt,5,3,"form",6),a(),i(14,"mat-card-actions",7)(15,"button",8),v("click",function(){return o.onLike()}),d(16,"LIKE"),a(),i(17,"button",9),v("click",function(){return o.onAddComment()}),d(18,"ADD COMMENT"),a()()()),r&2&&(l("id",o.elementId()),m(3),u(" ",o.post==null?null:o.post.content," "),m(),C(4,o.post!=null&&o.post.imageUrl?4:-1),m(2),C(6,(o.post==null?null:o.post.comments.length)>0?6:-1),m(3),u(" Likes: ",o.likes()," "),m(2),u(" Comments: ",o.commentsAmount()," "),m(2),C(13,o.showCommentsForm()?13:-1))},dependencies:[F,st,it,ot,at,q,S,B,I,K,k,U,nt,Z,H,Q,W,tt,et],styles:[".post-container[_ngcontent-%COMP%]   p.post-content[_ngcontent-%COMP%]{color:#fff;font-size:1rem;padding:15px}.post-container[_ngcontent-%COMP%]   .mat-mdc-card-footer[_ngcontent-%COMP%]{margin-top:10px}.post-container[_ngcontent-%COMP%]   span.post-like-amount[_ngcontent-%COMP%], .post-container[_ngcontent-%COMP%]   span.post-comments-amount[_ngcontent-%COMP%]{color:#fff;font-size:.8rem;font-weight:700;margin-left:15px}.post-container[_ngcontent-%COMP%]   .post-comment-field[_ngcontent-%COMP%]{padding:0 10px;width:95%}.post-container[_ngcontent-%COMP%]   .post-amounts-container[_ngcontent-%COMP%]{position:relative;right:6%;padding-top:5px}.post-container[_ngcontent-%COMP%]   .post-text-message[_ngcontent-%COMP%]{background-color:#fff;border-radius:7px;text-align:left;padding:5px}"]});let t=e;return t})();var bt=(t,e)=>e.id;function vt(t,e){if(t&1&&(i(0,"article",2),g(1,"app-ad",3),a()),t&2){let s=c().$index,n=c();m(),l("ad",n.ad())("index",s)}}function Ft(t,e){if(t&1&&(i(0,"article",4),g(1,"app-post",5),a()),t&2){let s=c(),n=s.$implicit,r=s.$index;m(),l("post",n)("index",r)}}function Ot(t,e){if(t&1&&f(0,vt,2,2,"article",2)(1,Ft,2,2),t&2){let s=e.$index;C(0,s>0&&s%4===0?0:1)}}var te=(()=>{let e=class e{constructor(n){this.store$=n,this.postList=p([]),this.posts=new E,this.ad=p(null)}ngOnInit(){this.fetchPosts().subscribe(),this.fetchAd(),this.getPost().subscribe(),this.getAd().subscribe(),this.handlePosts()}fetchPosts(){return this.store$.select(mt).pipe(x(n=>{n&&n.length>0?this.posts.next(n):this.posts.next([])}))}fetchAd(){this.store$.dispatch(L())}handlePosts(){this.posts.subscribe(n=>{this.postList.update(()=>n)})}getPost(){return this.store$.select(z).pipe(y(1),x(n=>{n&&n!==""&&this.store$.dispatch(G({userId:n}))}))}getAd(){return this.store$.select(dt).pipe(y(1),x(n=>{n&&this.ad.update(()=>n)}))}};e.\u0275fac=function(r){return new(r||e)(M(O))},e.\u0275cmp=h({type:e,selectors:[["app-posts"]],standalone:!0,features:[_],decls:4,vars:0,consts:[["aria-label","Posts List","data-posts-section-container","",1,"posts-section-container"],[1,"post-list-container"],["aria-label","ad",1,"post-article"],[3,"ad","index"],["aria-label","Post",1,"post-article"],[3,"post","index"]],template:function(r,o){r&1&&(i(0,"section",0)(1,"div",1),P(2,Ot,2,1,null,null,bt),a()()),r&2&&(m(2),b(o.postList()))},dependencies:[F,ct,lt],styles:[".posts-section-container[_ngcontent-%COMP%]{height:100%;width:100%;padding-right:30px;padding-left:30px;box-sizing:border-box}.posts-section-container[_ngcontent-%COMP%]   .post-list-container[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;gap:20px;height:100%;padding-top:20px}.posts-section-container[_ngcontent-%COMP%]   .post-list-container[_ngcontent-%COMP%]   .post-article[_ngcontent-%COMP%]{width:30%;box-shadow:-14px 4px 50px #0000004d}@media screen and (max-width: 768px){.posts-section-container[_ngcontent-%COMP%]   .post-list-container[_ngcontent-%COMP%]   .post-article[_ngcontent-%COMP%]{width:100%}}"]});let t=e;return t})();export{te as PostsComponent};
