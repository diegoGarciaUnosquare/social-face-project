import{a as Y,b as $}from"./chunk-O4IOFUBL.js";import{a as g,h as J,i as K,j as Q,k as W,o as b,p as R}from"./chunk-KBMGLM7F.js";import{A as q,B as j,N as k,a as P,b as w,c as x,d as M,e as V,f as S,g as y,h as T,i as G,k as D,v as I,x as N,y as L,z as U}from"./chunk-T5SYB2EV.js";import{i as X}from"./chunk-4QQ7GXC4.js";import"./chunk-JGYM447R.js";import{$b as E,Aa as B,Ba as O,Cb as l,Gb as a,Hb as o,Hc as F,Ib as f,Ka as z,Kb as H,Nb as C,Pb as _,Xb as d,cb as r,db as u,pb as h,qa as v,s as A,vb as p,xb as c}from"./chunk-7USMCEWK.js";function pe(e,t){e&1&&f(0,"mat-spinner",1)}function ce(e,t){e&1&&(a(0,"mat-error",5),d(1,"New password is required"),o())}function fe(e,t){e&1&&(a(0,"mat-error",5),d(1,"New password is invalid"),o())}function ue(e,t){e&1&&(a(0,"mat-error",5),d(1,"Password is required"),o())}function we(e,t){e&1&&(a(0,"mat-error",5),d(1,"Email is invalid"),o())}function ve(e,t){if(e&1&&(a(0,"div",2)(1,"mat-form-field")(2,"mat-label",3),d(3,"New Password"),o(),f(4,"input",4),p(5,ce,2,0,"mat-error",5)(6,fe,2,0,"mat-error",5),o(),a(7,"mat-form-field")(8,"mat-label",6),d(9,"Confirm Password"),o(),f(10,"input",7),p(11,ue,2,0,"mat-error",5)(12,we,2,0,"mat-error",5),o()(),a(13,"button",8),d(14,"Validate Email"),o()),e&2){let n=_();r(4),c("formControl",n.newPassword),r(),l(5,n.newPassword.hasError("required")?5:-1),r(),l(6,n.newPassword.hasError("pattern")?6:-1),r(4),c("formControl",n.confirmPassword),r(),l(11,n.confirmPassword.hasError("required")?11:-1),r(),l(12,n.passwordMatches?-1:12),r(),c("disabled",!n.formGroup.valid&&!n.passwordMatches)}}var ee=(()=>{let t=class t{constructor(m,i,s){this.store=m,this.actions$=i,this.snackbarService=s,this.newPassword=new S("",[w.required,w.minLength(8),w.pattern(Y)]),this.confirmPassword=new S("",[w.required]),this.isLoading=h(!1),this.formGroup=new V({newPassword:this.newPassword,confirmPassword:this.confirmPassword})}get passwordMatches(){return this.newPassword.value===this.confirmPassword.value}onSubmit(){this.formGroup.valid&&(this.isLoading.update(()=>!0),this.store.dispatch(W({password:this.newPassword.value})))}};t.\u0275fac=function(i){return new(i||t)(u(g),u(b),u($))},t.\u0275cmp=v({type:t,selectors:[["app-update-password-form"]],standalone:!0,features:[E],decls:3,vars:2,consts:[[1,"form",3,"ngSubmit","formGroup"],["data-spinner",""],[1,"form-group"],["aria-label","New Password"],["matInput","","aria-placeholder","enter new password","placeholder","Enter new password","data-new-password-field","",3,"formControl"],["data-validate-email-error-field",""],["aria-label","Confirm Password"],["matInput","","aria-placeholder","enter new password","placeholder","Enter your new password to confirm","data-confirm-password-field","",3,"formControl"],["mat-flat-button","","color","primary","type","submit","data-validate-email-btn","",3,"disabled"]],template:function(i,s){i&1&&(a(0,"form",0),C("ngSubmit",function(){return s.onSubmit()}),p(1,pe,1,0,"mat-spinner",1)(2,ve,15,7),o()),i&2&&(c("formGroup",s.formGroup),r(),l(1,s.isLoading()?1:2))},dependencies:[D,y,P,x,M,T,G,F,k,U,N,L,q,I,j]});let e=t;return e})();function he(e,t){e&1&&f(0,"mat-spinner",1)}function Ce(e,t){e&1&&(a(0,"mat-error",4),d(1,"Email is required"),o())}function _e(e,t){e&1&&(a(0,"mat-error",4),d(1,"Email is invalid"),o())}function Ee(e,t){if(e&1&&(a(0,"div",2)(1,"mat-form-field")(2,"mat-label"),d(3,"Email"),o(),f(4,"input",3),p(5,Ce,2,0,"mat-error",4)(6,_e,2,0,"mat-error",4),o()(),a(7,"button",5),d(8,"Validate Email"),o()),e&2){let n=_();r(4),c("formControl",n.validateEmailField),r(),l(5,n.validateEmailField.hasError("required")?5:-1),r(),l(6,n.validateEmailField.hasError("pattern")?6:-1),r(),c("disabled",!n.formGroup.valid)}}var te=(()=>{let t=class t{constructor(m,i,s){this.store$=m,this.actions$=i,this.snackService=s,this.emailValidated=new z,this.isLoading=h(!1),this.validateEmailField=new S("",[w.required,w.email]),this.formGroup=new V({validateEmailField:this.validateEmailField})}ngOnInit(){this.handleValidateEmailSuccess().subscribe(),this.handleValidateEmailError().subscribe()}onSubmit(){this.formGroup.valid&&(this.isLoading.update(()=>!0),this.store$.dispatch(J({email:this.validateEmailField.value})))}handleValidateEmailSuccess(){return this.actions$.pipe(R(K),A(()=>{this.isLoading.update(()=>!1),this.emailValidated.emit(!0)}))}handleValidateEmailError(){return this.actions$.pipe(R(Q),A(m=>{if(this.isLoading.update(()=>!1),m){let{error:i}=m;this.snackService.openSnackBar(i.message)}}))}};t.\u0275fac=function(i){return new(i||t)(u(g),u(b),u($))},t.\u0275cmp=v({type:t,selectors:[["app-validate-email-form"]],outputs:{emailValidated:"emailValidated"},standalone:!0,features:[E],decls:3,vars:2,consts:[[1,"form",3,"ngSubmit","formGroup"],["data-spinner",""],[1,"form-group"],["matInput","","placeholder","Enter your email","data-validate-email-field","",3,"formControl"],["data-validate-email-error-field",""],["mat-flat-button","","color","primary","type","submit","data-validate-email-btn","",3,"disabled"]],template:function(i,s){i&1&&(a(0,"form",0),C("ngSubmit",function(){return s.onSubmit()}),p(1,he,1,0,"mat-spinner",1)(2,Ee,9,4),o()),i&2&&(c("formGroup",s.formGroup),r(),l(1,s.isLoading()?1:2))},dependencies:[D,y,P,x,M,T,G,F,k,U,N,L,q,I,j]});let e=t;return e})();function Fe(e,t){e&1&&f(0,"app-update-password-form")}function Se(e,t){if(e&1){let n=H();a(0,"app-validate-email-form",5),C("emailValidated",function(i){B(n);let s=_();return O(s.onEmailValidated(i))}),o()}}var Je=(()=>{let t=class t{constructor(){this.showUpdatePasswordForm=h(!1)}onEmailValidated(m){m&&this.showUpdatePasswordForm.update(()=>!0)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=v({type:t,selectors:[["app-forgot-password"]],standalone:!0,features:[E],decls:8,vars:1,consts:[[1,"container"],[1,"row"],[1,"col-md-6","mx-auto"],[1,"card","card-body"],[1,"title"],[3,"emailValidated"]],template:function(i,s){i&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),d(5,"Forgot Password"),o(),p(6,Fe,1,0,"app-update-password-form")(7,Se,1,0),o()()()()),i&2&&(r(6),l(6,s.showUpdatePasswordForm()?6:7))},dependencies:[ee,te,X,F]});let e=t;return e})();export{Je as ForgotPasswordComponent};
