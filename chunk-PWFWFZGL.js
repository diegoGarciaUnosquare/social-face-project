import{a as ae}from"./chunk-5K454CJT.js";import{d as J,e as K,f as Q,g as W,h as X,i as ee,m as y}from"./chunk-PCRS6PNV.js";import{b as te,f as ie}from"./chunk-5LLNNWGJ.js";import{b as M,c as F}from"./chunk-2DFU5A5S.js";import{n as b}from"./chunk-UO3TCGKE.js";import{G as B,j as V,k as w,l as T,m as G,n as U,o as S,p as I,q as L,r as N,s as q,t as D,u as O,w as j,y as k,z as $}from"./chunk-ZN7JFSGK.js";import{H as x}from"./chunk-RMY26TJC.js";import{Ca as A,Da as Z,Eb as m,Ib as o,Ic as P,Jb as a,Kb as f,Ma as Y,Mb as H,Pb as C,Rb as _,Zb as l,bc as E,eb as n,fb as p,nb as z,rb as g,sa as h,u as v,xb as c,zb as u}from"./chunk-E7CHWM35.js";function ve(e,t){e&1&&f(0,"mat-spinner",1)}function he(e,t){e&1&&(o(0,"mat-error",5),l(1," New password is required "),a())}function ge(e,t){e&1&&(o(0,"mat-error",6),l(1," New password is invalid "),a())}function Ce(e,t){e&1&&(o(0,"mat-error",9),l(1," Password is required "),a())}function _e(e,t){e&1&&(o(0,"mat-error",10),l(1," Email is invalid "),a())}function Ee(e,t){if(e&1&&(o(0,"div",2)(1,"mat-form-field")(2,"mat-label",3),l(3,"New Password"),a(),f(4,"input",4),c(5,he,2,0,"mat-error",5)(6,ge,2,0,"mat-error",6),a(),o(7,"mat-form-field")(8,"mat-label",7),l(9,"Confirm Password"),a(),f(10,"input",8),c(11,Ce,2,0,"mat-error",9)(12,_e,2,0,"mat-error",10),a()(),o(13,"button",11),l(14," Update Password "),a()),e&2){let s=_();n(4),u("formControl",s.newPassword),n(),m(5,s.newPassword.hasError("required")?5:-1),n(),m(6,s.newPassword.hasError("pattern")?6:-1),n(4),u("formControl",s.confirmPassword),n(),m(11,s.confirmPassword.hasError("required")?11:-1),n(),m(12,s.passwordMatches?-1:12),n(),u("disabled",!s.formGroup.valid&&!s.passwordMatches)}}var re=(()=>{let t=class t{constructor(r,i,d,R,se){this.store=r,this.actions$=i,this.router=d,this.ngZone=R,this.snackbarService=se,this.newPassword=new S("",[w.required,w.minLength(8),w.pattern(ae)]),this.confirmPassword=new S("",[w.required]),this.isLoading=g(!1),this.formGroup=new U({newPassword:this.newPassword,confirmPassword:this.confirmPassword})}ngOnInit(){this.handleUpdatePasswordSuccess().subscribe(),this.handleUpdatePasswordFailure().subscribe()}get passwordMatches(){return this.newPassword.value===""||this.confirmPassword.value===""?!1:this.newPassword.value===this.confirmPassword.value}onSubmit(){this.formGroup.valid&&(this.isLoading.update(()=>!0),this.store.dispatch(W({password:this.newPassword.value})))}handleUpdatePasswordSuccess(){return this.actions$.pipe(F(X),v(()=>{this.isLoading.update(()=>!1),this.snackbarService.openSnackBar("Password updated successfully. You will be redirected to login screen."),this.navigateToLogin()}))}handleUpdatePasswordFailure(){return this.actions$.pipe(F(ee),v(r=>{this.isLoading.update(()=>!1);let{error:i}=r;this.snackbarService.openSnackBar(i.message)}))}navigateToLogin(){this.ngZone.run(()=>{setTimeout(()=>{this.router.navigate(["login"])},2e3)})}};t.\u0275fac=function(i){return new(i||t)(p(b),p(M),p(te),p(z),p(y))},t.\u0275cmp=h({type:t,selectors:[["app-update-password-form"]],standalone:!0,features:[E],decls:3,vars:2,consts:[["data-update-password-form","",1,"form","update-password-form-container",3,"ngSubmit","formGroup"],["data-spinner",""],[1,"form-group"],["aria-label","New Password"],["type","password","matInput","","aria-placeholder","enter new password","aria-required","true","placeholder","Enter new password","id","newPasswordField","data-new-password-field","",3,"formControl"],["aria-errormessage","newPasswordField","data-validate-email-error-field",""],["aria-invalid","New password is invalid","data-validate-email-error-field",""],["aria-label","Confirm Password"],["type","password","matInput","","aria-placeholder","enter new password","placeholder","Enter your new password to confirm","aria-required","true","data-confirm-password-field","",3,"formControl"],["aria-errormessage","Confirm Password is required","data-validate-email-error-field",""],["aria-invalid","Password doesnt match","data-validate-email-error-field",""],["aria-label","Update Password button","mat-flat-button","","color","primary","type","submit","data-update-password-btn","",1,"update-password-btn",3,"disabled"]],template:function(i,d){i&1&&(o(0,"form",0),C("ngSubmit",function(){return d.onSubmit()}),c(1,ve,1,0,"mat-spinner",1)(2,Ee,15,7),a()),i&2&&(u("formGroup",d.formGroup),n(),m(1,d.isLoading()?1:2))},dependencies:[q,I,V,T,G,L,N,P,B,j,D,O,k,x,$],styles:[".update-password-form-container[_ngcontent-%COMP%]{height:200px}.update-password-form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:90%}.update-password-form-container[_ngcontent-%COMP%]   .update-password-btn[_ngcontent-%COMP%]{width:100%!important}"]});let e=t;return e})();function Pe(e,t){e&1&&f(0,"mat-spinner",1)}function Fe(e,t){e&1&&(o(0,"mat-error",5),l(1," Email is required "),a())}function Se(e,t){e&1&&(o(0,"mat-error",7),l(1," Email is invalid "),a())}function be(e,t){if(e&1&&(o(0,"div",2)(1,"mat-form-field")(2,"mat-label",3),l(3,"Validate Email"),a(),f(4,"input",4),c(5,Fe,2,0,"mat-error",5)(6,Se,2,0),a()(),o(7,"button",6),l(8,"Validate Email"),a()),e&2){let s=_();n(4),u("formControl",s.validateEmailField),n(),m(5,s.validateEmailField.hasError("required")?5:s.validateEmailField.hasError("pattern")?6:-1),n(2),u("disabled",!s.formGroup.valid)}}var ne=(()=>{let t=class t{constructor(r,i,d){this.store$=r,this.actions$=i,this.snackService=d,this.emailValidated=new Y,this.isLoading=g(!1),this.validateEmailField=new S("",[w.required,w.email]),this.formGroup=new U({validateEmailField:this.validateEmailField})}ngOnInit(){this.handleValidateEmailSuccess().subscribe(),this.handleValidateEmailError().subscribe()}onSubmit(){this.formGroup.valid&&(this.isLoading.update(()=>!0),this.store$.dispatch(J({email:this.validateEmailField.value})))}handleValidateEmailSuccess(){return this.actions$.pipe(F(K),v(()=>{this.isLoading.update(()=>!1),this.emailValidated.emit(!0)}))}handleValidateEmailError(){return this.actions$.pipe(F(Q),v(r=>{this.isLoading.update(()=>!1);let{error:i}=r;this.snackService.openSnackBar(i.message)}))}};t.\u0275fac=function(i){return new(i||t)(p(b),p(M),p(y))},t.\u0275cmp=h({type:t,selectors:[["app-validate-email-form"]],outputs:{emailValidated:"emailValidated"},standalone:!0,features:[E],decls:3,vars:2,consts:[["data-validate-email-form","",1,"validate-email-form-container",3,"ngSubmit","formGroup"],["data-spinner",""],[1,"form-group"],["mat-label","Validate Email"],["matInput","","aria-placeholder","Enter your email","placeholder","Enter your email","aria-required","true","id","validateEmailField","data-validate-email-field","",3,"formControl"],["aria-errormessage","validateEmailField","data-validate-email-error-field",""],["aria-label","Validate email button","mat-flat-button","","color","primary","type","submit","data-validate-email-btn","",1,"validate-email-btn",3,"disabled"],["aria-errormessage","validateEmailField","aria-invalid","true","data-validate-email-error-field",""]],template:function(i,d){i&1&&(o(0,"form",0),C("ngSubmit",function(){return d.onSubmit()}),c(1,Pe,1,0,"mat-spinner",1)(2,be,9,3),a()),i&2&&(u("formGroup",d.formGroup),n(),m(1,d.isLoading()?1:2))},dependencies:[q,I,V,T,G,L,N,P,B,j,D,O,k,x,$],styles:[".validate-email-form-container[_ngcontent-%COMP%]   .validate-email-btn[_ngcontent-%COMP%]{width:100%!important}"]});let e=t;return e})();function Me(e,t){e&1&&f(0,"app-update-password-form")}function xe(e,t){if(e&1){let s=H();o(0,"app-validate-email-form",2),C("emailValidated",function(i){A(s);let d=_();return Z(d.onEmailValidated(i))}),a()}}var tt=(()=>{let t=class t{constructor(){this.showUpdatePasswordForm=g(!1)}onEmailValidated(r){r&&this.showUpdatePasswordForm.update(()=>!0)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=h({type:t,selectors:[["app-forgot-password"]],standalone:!0,features:[E],decls:5,vars:1,consts:[["data-forgot-password-container","",1,"forgot-password-container"],["aria-label","Forgot Password Section",1,"title"],[3,"emailValidated"]],template:function(i,d){i&1&&(o(0,"div",0)(1,"h1",1),l(2,"Forgot Password"),a(),c(3,Me,1,0,"app-update-password-form")(4,xe,1,0),a()),i&2&&(n(3),m(3,d.showUpdatePasswordForm()?3:4))},dependencies:[re,ne,ie,P],styles:[".forgot-password-container[_ngcontent-%COMP%]{align-items:center;display:flex;height:100vh;justify-content:center;width:100vw;flex-direction:column}"]});let e=t;return e})();export{tt as ForgotPasswordComponent};
