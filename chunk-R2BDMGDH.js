import{a as ie,b as B}from"./chunk-CYLURVU2.js";import{a as b,h as J,i as K,j as Q,k as W,l as X,m as Z,o as M,p as S}from"./chunk-KBMGLM7F.js";import{A as q,B as j,N as $,a as x,b as w,c as y,d as V,e as T,f as F,g as G,h as U,i as L,k as I,v as D,x as N,y as k,z as O}from"./chunk-EE7E52Q5.js";import{g as ee,j as te}from"./chunk-JSOPZ2Y7.js";import"./chunk-JGYM447R.js";import{$b as E,Aa as A,Ba as Y,Cb as l,Gb as o,Hb as a,Hc as P,Ib as f,Ka as z,Kb as H,Nb as _,Pb as g,Xb as m,cb as n,db as p,pb as C,qa as v,s as h,vb as c,xb as u}from"./chunk-7USMCEWK.js";function fe(e,t){e&1&&f(0,"mat-spinner",1)}function we(e,t){e&1&&(o(0,"mat-error",5),m(1,"New password is required"),a())}function he(e,t){e&1&&(o(0,"mat-error",5),m(1,"New password is invalid"),a())}function ve(e,t){e&1&&(o(0,"mat-error",5),m(1,"Password is required"),a())}function Ce(e,t){e&1&&(o(0,"mat-error",5),m(1,"Email is invalid"),a())}function _e(e,t){if(e&1&&(o(0,"div",2)(1,"mat-form-field")(2,"mat-label",3),m(3,"New Password"),a(),f(4,"input",4),c(5,we,2,0,"mat-error",5)(6,he,2,0,"mat-error",5),a(),o(7,"mat-form-field")(8,"mat-label",6),m(9,"Confirm Password"),a(),f(10,"input",7),c(11,ve,2,0,"mat-error",5)(12,Ce,2,0,"mat-error",5),a()(),o(13,"button",8),m(14,"Update Password"),a()),e&2){let s=g();n(4),u("formControl",s.newPassword),n(),l(5,s.newPassword.hasError("required")?5:-1),n(),l(6,s.newPassword.hasError("pattern")?6:-1),n(4),u("formControl",s.confirmPassword),n(),l(11,s.confirmPassword.hasError("required")?11:-1),n(),l(12,s.passwordMatches?-1:12),n(),u("disabled",!s.formGroup.valid&&!s.passwordMatches)}}var oe=(()=>{let t=class t{constructor(r,i,d,R){this.store=r,this.actions$=i,this.router=d,this.snackbarService=R,this.newPassword=new F("",[w.required,w.minLength(8),w.pattern(ie)]),this.confirmPassword=new F("",[w.required]),this.isLoading=C(!1),this.formGroup=new T({newPassword:this.newPassword,confirmPassword:this.confirmPassword})}ngOnInit(){this.handleUpdatePasswordSuccess().subscribe(),this.handleUpdatePasswordFailure().subscribe()}get passwordMatches(){return this.newPassword.value===""||this.confirmPassword.value===""?!1:this.newPassword.value===this.confirmPassword.value}onSubmit(){this.formGroup.valid&&(this.isLoading.update(()=>!0),this.store.dispatch(W({password:this.newPassword.value})))}handleUpdatePasswordSuccess(){return this.actions$.pipe(S(X),h(()=>{this.isLoading.update(()=>!1),this.snackbarService.openSnackBar("Password updated successfully. You will be redirected to login screen."),this.navigateToLogin()}))}handleUpdatePasswordFailure(){return this.actions$.pipe(S(Z),h(r=>{this.isLoading.update(()=>!1);let{error:i}=r;this.snackbarService.openSnackBar(i.message)}))}navigateToLogin(){setTimeout(()=>{this.router.navigate(["login"])},2e3)}};t.\u0275fac=function(i){return new(i||t)(p(b),p(M),p(ee),p(B))},t.\u0275cmp=v({type:t,selectors:[["app-update-password-form"]],standalone:!0,features:[E],decls:3,vars:2,consts:[["data-update-password-form","",1,"form","update-password-form-container",3,"ngSubmit","formGroup"],["data-spinner",""],[1,"form-group"],["aria-label","New Password"],["type","password","matInput","","aria-placeholder","enter new password","placeholder","Enter new password","data-new-password-field","",3,"formControl"],["data-validate-email-error-field",""],["aria-label","Confirm Password"],["type","password","matInput","","aria-placeholder","enter new password","placeholder","Enter your new password to confirm","data-confirm-password-field","",3,"formControl"],["mat-flat-button","","color","primary","type","submit","data-update-password-btn","",1,"update-password-btn",3,"disabled"]],template:function(i,d){i&1&&(o(0,"form",0),_("ngSubmit",function(){return d.onSubmit()}),c(1,fe,1,0,"mat-spinner",1)(2,_e,15,7),a()),i&2&&(u("formGroup",d.formGroup),n(),l(1,d.isLoading()?1:2))},dependencies:[I,G,x,y,V,U,L,P,$,O,N,k,q,D,j],styles:[".update-password-form-container[_ngcontent-%COMP%]{height:200px}.update-password-form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:90%}.update-password-form-container[_ngcontent-%COMP%]   .update-password-btn[_ngcontent-%COMP%]{width:100%!important}"]});let e=t;return e})();function ge(e,t){e&1&&f(0,"mat-spinner",1)}function Ee(e,t){e&1&&(o(0,"mat-error",4),m(1,"Email is required"),a())}function Pe(e,t){e&1&&(o(0,"mat-error",4),m(1,"Email is invalid"),a())}function Se(e,t){if(e&1&&(o(0,"div",2)(1,"mat-form-field")(2,"mat-label"),m(3,"Email"),a(),f(4,"input",3),c(5,Ee,2,0,"mat-error",4)(6,Pe,2,0),a()(),o(7,"button",5),m(8,"Validate Email"),a()),e&2){let s=g();n(4),u("formControl",s.validateEmailField),n(),l(5,s.validateEmailField.hasError("required")?5:s.validateEmailField.hasError("pattern")?6:-1),n(2),u("disabled",!s.formGroup.valid)}}var re=(()=>{let t=class t{constructor(r,i,d){this.store$=r,this.actions$=i,this.snackService=d,this.emailValidated=new z,this.isLoading=C(!1),this.validateEmailField=new F("",[w.required,w.email]),this.formGroup=new T({validateEmailField:this.validateEmailField})}ngOnInit(){this.handleValidateEmailSuccess().subscribe(),this.handleValidateEmailError().subscribe()}onSubmit(){this.formGroup.valid&&(this.isLoading.update(()=>!0),this.store$.dispatch(J({email:this.validateEmailField.value})))}handleValidateEmailSuccess(){return this.actions$.pipe(S(K),h(()=>{this.isLoading.update(()=>!1),this.emailValidated.emit(!0)}))}handleValidateEmailError(){return this.actions$.pipe(S(Q),h(r=>{this.isLoading.update(()=>!1);let{error:i}=r;this.snackService.openSnackBar(i.message)}))}};t.\u0275fac=function(i){return new(i||t)(p(b),p(M),p(B))},t.\u0275cmp=v({type:t,selectors:[["app-validate-email-form"]],outputs:{emailValidated:"emailValidated"},standalone:!0,features:[E],decls:3,vars:2,consts:[["data-validate-email-form","",1,"validate-email-form-container",3,"ngSubmit","formGroup"],["data-spinner",""],[1,"form-group"],["matInput","","placeholder","Enter your email","data-validate-email-field","",3,"formControl"],["data-validate-email-error-field",""],["mat-flat-button","","color","primary","type","submit","data-validate-email-btn","",1,"validate-email-btn",3,"disabled"]],template:function(i,d){i&1&&(o(0,"form",0),_("ngSubmit",function(){return d.onSubmit()}),c(1,ge,1,0,"mat-spinner",1)(2,Se,9,3),a()),i&2&&(u("formGroup",d.formGroup),n(),l(1,d.isLoading()?1:2))},dependencies:[I,G,x,y,V,U,L,P,$,O,N,k,q,D,j],styles:[".validate-email-form-container[_ngcontent-%COMP%]   .validate-email-btn[_ngcontent-%COMP%]{width:100%!important}"]});let e=t;return e})();function Fe(e,t){e&1&&f(0,"app-update-password-form")}function be(e,t){if(e&1){let s=H();o(0,"app-validate-email-form",5),_("emailValidated",function(i){A(s);let d=g();return Y(d.onEmailValidated(i))}),a()}}var Ze=(()=>{let t=class t{constructor(){this.showUpdatePasswordForm=C(!1)}onEmailValidated(r){r&&this.showUpdatePasswordForm.update(()=>!0)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=v({type:t,selectors:[["app-forgot-password"]],standalone:!0,features:[E],decls:8,vars:1,consts:[["data-forgot-password-container","",1,"container"],[1,"row"],[1,"col-md-6","mx-auto"],[1,"card","card-body"],[1,"title"],[3,"emailValidated"]],template:function(i,d){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),m(5,"Forgot Password"),a(),c(6,Fe,1,0,"app-update-password-form")(7,be,1,0),a()()()()),i&2&&(n(6),l(6,d.showUpdatePasswordForm()?6:7))},dependencies:[oe,re,te,P]});let e=t;return e})();export{Ze as ForgotPasswordComponent};
