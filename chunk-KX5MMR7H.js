import{a as ce}from"./chunk-KNEBTT2U.js";import{a as k,e as G,f as O,g as L,o as B,p as b}from"./chunk-KBMGLM7F.js";import{A as ne,B as oe,C as me,D as se,L as le,M as pe,N as de,a as z,b as d,c as Z,d as $,e as Q,f,g as H,h as J,i as K,j as W,k as X,r as Y,v as ee,w as te,x as re,y as ie,z as ae}from"./chunk-T5SYB2EV.js";import{g as V,i as j}from"./chunk-4QQ7GXC4.js";import"./chunk-JGYM447R.js";import{$b as F,Aa as g,Ba as w,Cb as p,Ec as T,Gb as i,Gc as A,H as _,Hb as t,Hc as R,Ib as u,Kb as y,Nb as x,Pb as U,Tb as q,Ub as N,Vb as M,Xb as a,ac as P,cb as n,db as C,dc as D,ec as I,qa as S,s as E,vb as c,xb as m}from"./chunk-7USMCEWK.js";var Me=new RegExp(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/),ue=new RegExp(/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/);var he=["createUserStepper"],Ce=()=>["/login"];function Ee(e,o){e&1&&(i(0,"mat-error",8),a(1,"Username is required"),t())}function _e(e,o){e&1&&(i(0,"mat-error",11),a(1,"Password is required"),t())}function be(e,o){e&1&&(i(0,"mat-error",11),a(1,"Password must be at least 8 characters"),t())}function ve(e,o){e&1&&(i(0,"mat-error",11),a(1," Password must contain at least one number and one uppercase letter "),t())}function Se(e,o){e&1&&(i(0,"mat-error",14),a(1,"Email is required"),t())}function ge(e,o){e&1&&(i(0,"mat-error",14),a(1,"Email is invalid"),t())}function we(e,o){e&1&&(i(0,"mat-error",17),a(1,"First Name is required"),t())}function ye(e,o){e&1&&(i(0,"mat-error"),a(1,"Last Name is required"),t())}function xe(e,o){e&1&&(i(0,"mat-error"),a(1,"Date of Birth is required"),t())}function Ue(e,o){if(e&1&&c(0,xe,2,0,"mat-error",29),e&2){let fe=U();m("ngIf",fe.birthDate.errors.required)}}function qe(e,o){e&1&&u(0,"mat-spinner",25)}function Ne(e,o){e&1&&(i(0,"button",30),a(1," Next "),t())}var Ye=(()=>{let o=class o{constructor(l,s,r,h){this.breakpointObserver=l,this.actions$=s,this.snackbarService=r,this.store=h,this.email=new f("",[d.required,d.email]),this.firstName=new f("",d.required),this.lastName=new f("",d.required),this.password=new f("",[d.required,d.minLength(8),d.pattern(ue)]),this.username=new f("",d.required),this.birthDate=new f("",d.required),this.notificationPreference=new f(!1),this.isLoading=!1,this.createAccountFormGroup=new Q({email:this.email,firstName:this.firstName,lastName:this.lastName,password:this.password,username:this.username,birthDate:this.birthDate,notificationPreference:this.notificationPreference}),this.stepperOrientation=l.observe("(min-width: 800px)").pipe(E(({matches:v})=>v?"horizontal":"vertical"))}ngOnInit(){this.handleUserCreationError().subscribe(),this.handleUserCreationSuccess().subscribe()}onSubmit(){if(this.createAccountFormGroup.valid){let l={email:this.email.value,firstName:this.firstName.value,lastName:this.lastName.value,password:this.password.value,username:this.username.value,birthDate:this.birthDate.value,notificationPreference:this.notificationPreference.value};this.store.dispatch(G({userData:l}))}}handleUserCreationError(){return this.actions$.pipe(b(L),_(1),E(l=>{if(l){let{error:s}=l;this.snackbarService.openSnackBar(s.message)}}))}handleUserCreationSuccess(){return this.actions$.pipe(b(O),_(1),E(()=>{this.createUserStepper&&this.createUserStepper.next()}))}};o.\u0275fac=function(s){return new(s||o)(C(Y),C(B),C(ce),C(k))},o.\u0275cmp=S({type:o,selectors:[["app-create-user"]],viewQuery:function(s,r){if(s&1&&q(he,5),s&2){let h;N(h=M())&&(r.createUserStepper=h.first)}},standalone:!0,features:[F],decls:53,vars:22,consts:[["createUserStepper",""],[1,"create-user-container"],["linear","",1,"user-creation-stepper",3,"orientation"],["label","Fill information for account creation",3,"stepControl"],[3,"ngSubmit","formGroup"],[1,"form-group-container"],["aria-label","Enter username"],["type","text","matInput","","placeholder","Enter your username","required","",3,"formControl"],["data-username-error-field",""],["aria-label","Enter password"],["type","password","matInput","","placeholder","Enter your password","required","",3,"formControl"],["data-password-error-field",""],["aria-label","Enter email"],["type","email","matInput","","placeholder","Enter your email","required","",3,"formControl"],["data-email-error-field",""],["aria-label","Enter first name"],["type","text","matInput","","placeholder","Enter your first name","required","",3,"formControl"],["data-first-name-error",""],["aria-label","Enter last name"],["type","text","matInput","","placeholder","Enter your last name","required","",3,"formControl"],["aria-label","Enter date of birth"],["type","date","matInput","","placeholder","Enter your date of birth","required","",3,"formControl"],["aria-label","Select notification preference"],["value","1"],["value","2"],["data-spinner",""],["label","Done!"],[1,"account-created-title"],["aria-label","Go to login page button","mat-button","","data-navigate-login-button","",3,"routerLink"],[4,"ngIf"],["aria-label","Navigate to next step","type","submit","mat-flat-button","","color","primary","data-next-button",""]],template:function(s,r){if(s&1){let h=y();i(0,"section",1)(1,"mat-stepper",2,0),D(3,"async"),i(4,"mat-step",3)(5,"form",4),x("ngSubmit",function(){return g(h),w(r.onSubmit())}),i(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),a(9,"Username"),t(),u(10,"input",7),c(11,Ee,2,0,"mat-error",8),t(),i(12,"mat-form-field",9)(13,"mat-label"),a(14,"Password"),t(),u(15,"input",10),c(16,_e,2,0,"mat-error",11)(17,be,2,0,"mat-error",11)(18,ve,2,0),t(),i(19,"mat-form-field",12)(20,"mat-label"),a(21,"Email"),t(),u(22,"input",13),c(23,Se,2,0,"mat-error",14)(24,ge,2,0,"mat-error",14),t(),i(25,"mat-form-field",15)(26,"mat-label"),a(27,"First Name"),t(),u(28,"input",16),c(29,we,2,0,"mat-error",17),t(),i(30,"mat-form-field",18)(31,"mat-label"),a(32,"Last Name"),t(),u(33,"input",19),c(34,ye,2,0,"mat-error"),t(),i(35,"mat-form-field",20)(36,"mat-label"),a(37,"Date of Birth"),t(),u(38,"input",21),c(39,Ue,1,1,"mat-error"),t(),i(40,"mat-radio-group",22)(41,"mat-radio-button",23),a(42,"Email Notifications"),t(),i(43,"mat-radio-button",24),a(44,"Browser Notifications"),t()()(),i(45,"div"),c(46,qe,1,0,"mat-spinner",25)(47,Ne,2,0),t()()(),i(48,"mat-step",26)(49,"h2",27),a(50," Account Created! "),t(),i(51,"a",28),a(52," Click here to navigate back to login screen. "),t()()()()}s&2&&(n(),m("orientation",I(3,19,r.stepperOrientation)),n(3),m("stepControl",r.createAccountFormGroup),n(),m("formGroup",r.createAccountFormGroup),n(5),m("formControl",r.username),n(),p(11,r.username.hasError("required")?11:-1),n(4),m("formControl",r.password),n(),p(16,r.password.hasError("required")?16:-1),n(),p(17,r.password.hasError("minlength")?17:r.password.hasError("pattern")?18:-1),n(5),m("formControl",r.email),n(),p(23,r.email.hasError("required")?23:-1),n(),p(24,r.email.hasError("pattern")?24:-1),n(4),m("formControl",r.firstName),n(),p(29,r.firstName.hasError("required")?29:-1),n(4),m("formControl",r.lastName),n(),p(34,r.lastName.hasError("required")?34:-1),n(4),m("formControl",r.birthDate),n(),p(39,r.birthDate.hasError("required")?39:-1),n(7),p(46,r.isLoading?46:47),n(5),m("routerLink",P(21,Ce)))},dependencies:[X,H,z,Z,$,W,J,K,de,ae,re,ie,ne,te,ee,le,pe,oe,me,se,A,j,V,R,T],styles:[".create-user-container[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;height:360px;justify-content:center;width:100%}.create-user-container[_ngcontent-%COMP%]   .user-creation-stepper[_ngcontent-%COMP%]{width:60%}.create-user-container[_ngcontent-%COMP%]   .form-group-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:10px;justify-content:space-around}.create-user-container[_ngcontent-%COMP%]   .account-created-title[_ngcontent-%COMP%]{color:#fff;margin-left:9px}"]});let e=o;return e})();export{Ye as CreateUserComponent};
