import{g as D,j as V}from"./chunk-J5UGBKPJ.js";import{J as nt,a as q,c as L,d as N,e as R,g as $,h as j,j as z,k as B,l as K,m as U,n as H,o as J,p as Q,q as W,r as X,s as Y,u as Z,w as tt,y as et}from"./chunk-WSYZKVRC.js";import{X as G,t as A,u as x,v as T}from"./chunk-ANMYY5ZS.js";import{Ab as l,Cb as g,Ea as f,Fa as _,Hb as d,Jb as b,Kb as w,Lb as o,Mb as i,Nb as k,Nc as y,Oc as E,Pb as M,Sb as h,Ub as c,ac as p,cc as u,fc as F,hb as r,ib as v,jc as S,lc as I,ua as O,ub as C}from"./chunk-CFLUTWLG.js";var P=T("feed"),ct=x(P,t=>t.posts?t.posts:[]),ut=x(P,t=>t.ads?t.ads:null),Ct=x(P,t=>t.posts?ot(t.posts):[]),ot=t=>[...t].sort((m,s)=>new Date(s.createdAt).getTime()-new Date(m.createdAt).getTime()).slice(0,3);var it=(t,e)=>e.id;function at(t,e){t&1&&k(0,"img",2)}function rt(t,e){if(t&1&&(o(0,"p",9),p(1),i()),t&2){let n=e.$implicit;r(),u(" ",n.content," ")}}function st(t,e){if(t&1&&(o(0,"div"),b(1,rt,2,1,"p",9,it),i()),t&2){let n=c();r(),w(n.post==null?null:n.post.comments)}}function mt(t,e){t&1&&(o(0,"mat-error",13),p(1,"Comment is required"),i())}function pt(t,e){if(t&1){let n=M();o(0,"form",10),h("keyup.enter",function(){f(n);let s=c();return _(s.onSubmit())}),o(1,"mat-form-field",11)(2,"textarea",12),p(3,"                    "),i(),l(4,mt,2,0,"mat-error",13),i()()}if(t&2){let n=c();g("formGroup",n.formGroup),r(2),g("formControl",n.addCommentField),r(2),d(4,n.addCommentField.hasError("required")?4:-1)}}function lt(t,e){if(t&1){let n=M();o(0,"mat-card-actions",8)(1,"button",14),h("click",function(){f(n);let s=c();return _(s.onLike())}),p(2,"LIKE"),i(),o(3,"button",15),h("click",function(){f(n);let s=c();return _(s.onAddComment())}),p(4,"ADD COMMENT"),i()()}}var At=(()=>{let e=class e{constructor(m){this.store=m,this.post=null,this.index=0,this.readOnly=!1,this.addCommentField=new J("",B.required),this.commentsAmount=C(0),this.elementId=C(""),this.showCommentsForm=C(!1),this.likes=C(0),this.formGroup=new H({addCommentField:this.addCommentField})}ngOnInit(){this.likes.set(this.post?.likes||0),this.commentsAmount.set(this.post?.comments.length||0),this.elementId.update(()=>`post-container-${this.index}`)}onSubmit(){this.formGroup.valid&&(this.store.dispatch(V({postId:this.post.id,content:this.addCommentField.value,userId:this.post.userId})),this.onAddComment())}onLike(){this.store.dispatch(D({postId:this.post.id}))}onAddComment(){this.showCommentsForm.update(m=>!m)}};e.\u0275fac=function(s){return new(s||e)(v(A))},e.\u0275cmp=O({type:e,selectors:[["app-post"]],inputs:{post:"post",index:"index",readOnly:"readOnly"},standalone:!0,features:[F],decls:18,vars:12,consts:[[1,"post-container",3,"id"],["aria-label","message of the post",1,"post-content"],["mat-card-image","","src","https://material.angular.io/assets/img/examples/shiba2.jpg","alt","Photo of post",1,"post-image"],[1,"post-amounts-container"],["aria-label","Message to show how many likes the post has.",1,"post-like-amount"],["aria-label","Message to show how many comments the post has.",1,"post-comments-amount"],[1,"post-date"],[3,"formGroup"],["aria-label","post action button section"],[1,"post-text-message"],[3,"keyup.enter","formGroup"],[1,"post-comment-field"],["matInput","","aria-required","true","id","addCommentFieldInput","type","text","data-add-comment-field","",3,"formControl"],["aria-errormessage","addCommentFieldInput","aria-label","Comment is required error message"],["mat-button","","data-post-like-btn","","aria-label","Like button",3,"click"],["mat-button","","data-post-comment-btn","","aria-label","Add comment button",3,"click"]],template:function(s,a){s&1&&(o(0,"mat-card",0)(1,"mat-card-subtitle")(2,"p",1),p(3),i()(),l(4,at,1,0,"img",2),o(5,"mat-card-content"),l(6,st,3,0,"div"),o(7,"div",3)(8,"span",4),p(9),i(),o(10,"span",5),p(11),i(),o(12,"span",6),p(13),S(14,"date"),i()()(),o(15,"mat-card-footer"),l(16,pt,5,3,"form",7),i(),l(17,lt,5,0,"mat-card-actions",8),i()),s&2&&(g("id",a.elementId()),r(3),u(" ",a.post==null?null:a.post.content," "),r(),d(4,a.post!=null&&a.post.imageUrl?4:-1),r(2),d(6,(a.post==null?null:a.post.comments.length)>0?6:-1),r(3),u(" Likes: ",a.likes()," "),r(2),u(" Comments: ",a.commentsAmount()," "),r(2),u(" ",I(14,9,a.post==null?null:a.post.createdAt,"shortDate")," "),r(3),d(16,a.showCommentsForm()?16:-1),r(),d(17,a.readOnly?-1:17))},dependencies:[E,y,nt,tt,Z,et,G,q,R,L,$,j,N,Y,Q,z,K,U,W,X],styles:[".post-container[_ngcontent-%COMP%]   p.post-content[_ngcontent-%COMP%]{color:#fff;font-size:1rem;padding:15px}.post-container[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]{width:100%;height:200px}.post-container[_ngcontent-%COMP%]   .mat-mdc-card-footer[_ngcontent-%COMP%]{margin-top:10px}.post-container[_ngcontent-%COMP%]   span.post-like-amount[_ngcontent-%COMP%], .post-container[_ngcontent-%COMP%]   span.post-comments-amount[_ngcontent-%COMP%], .post-container[_ngcontent-%COMP%]   span.post-date[_ngcontent-%COMP%]{color:#fff;font-size:.8rem;font-weight:700;margin-left:15px}.post-container[_ngcontent-%COMP%]   .post-comment-field[_ngcontent-%COMP%]{padding:0 10px;width:95%}.post-container[_ngcontent-%COMP%]   .post-amounts-container[_ngcontent-%COMP%]{position:relative;right:2%;padding-top:5px}.post-container[_ngcontent-%COMP%]   .post-text-message[_ngcontent-%COMP%]{background-color:#fff;border-radius:7px;text-align:left;padding:5px}@media screen and (min-width: 320px){.post-container[_ngcontent-%COMP%]   .post-amounts-container[_ngcontent-%COMP%]{right:6%}}@media screen and (min-width: 768px){.post-container[_ngcontent-%COMP%]   .post-amounts-container[_ngcontent-%COMP%]{right:2%}}"]});let t=e;return t})();export{ct as a,ut as b,Ct as c,At as d};
