import{a as ie}from"./chunk-5K454CJT.js";import{d as J,e as K,f as Q,g as W,h as X,i as Z,n as M,o as F,q as y}from"./chunk-ZNXT6L3P.js";import{b as ee,e as te}from"./chunk-BQD2EGGH.js";import{n as b}from"./chunk-UO3TCGKE.js";import{E as B,i as V,j as w,k as T,l as G,m as U,n as S,o as L,p as I,q,r as N,s as D,t as O,v as k,x as j,y as $}from"./chunk-76VXPCNJ.js";import{H as x}from"./chunk-RMY26TJC.js";import{Ca as A,Da as Y,Eb as m,Ib as o,Ic as P,Jb as a,Kb as f,Ma as z,Mb as H,Pb as C,Rb as _,Zb as l,bc as E,eb as n,fb as p,rb as g,sa as h,u as v,xb as c,zb as u}from"./chunk-E7CHWM35.js";function fe(e,t){e&1&&f(0,"mat-spinner",1)}function we(e,t){e&1&&(o(0,"mat-error",5),l(1," New password is required "),a())}function ve(e,t){e&1&&(o(0,"mat-error",6),l(1," New password is invalid "),a())}function he(e,t){e&1&&(o(0,"mat-error",9),l(1," Password is required "),a())}function ge(e,t){e&1&&(o(0,"mat-error",10),l(1," Email is invalid "),a())}function Ce(e,t){if(e&1&&(o(0,"div",2)(1,"mat-form-field")(2,"mat-label",3),l(3,"New Password"),a(),f(4,"input",4),c(5,we,2,0,"mat-error",5)(6,ve,2,0,"mat-error",6),a(),o(7,"mat-form-field")(8,"mat-label",7),l(9,"Confirm Password"),a(),f(10,"input",8),c(11,he,2,0,"mat-error",9)(12,ge,2,0,"mat-error",10),a()(),o(13,"button",11),l(14," Update Password "),a()),e&2){let s=_();n(4),u("formControl",s.newPassword),n(),m(5,s.newPassword.hasError("required")?5:-1),n(),m(6,s.newPassword.hasError("pattern")?6:-1),n(4),u("formControl",s.confirmPassword),n(),m(11,s.confirmPassword.hasError("required")?11:-1),n(),m(12,s.passwordMatches?-1:12),n(),u("disabled",!s.formGroup.valid&&!s.passwordMatches)}}var oe=(()=>{let t=class t{constructor(r,i,d,R){this.store=r,this.actions$=i,this.router=d,this.snackbarService=R,this.newPassword=new S("",[w.required,w.minLength(8),w.pattern(ie)]),this.confirmPassword=new S("",[w.required]),this.isLoading=g(!1),this.formGroup=new U({newPassword:this.newPassword,confirmPassword:this.confirmPassword})}ngOnInit(){this.handleUpdatePasswordSuccess().subscribe(),this.handleUpdatePasswordFailure().subscribe()}get passwordMatches(){return this.newPassword.value===""||this.confirmPassword.value===""?!1:this.newPassword.value===this.confirmPassword.value}onSubmit(){this.formGroup.valid&&(this.isLoading.update(()=>!0),this.store.dispatch(W({password:this.newPassword.value})))}handleUpdatePasswordSuccess(){return this.actions$.pipe(F(X),v(()=>{this.isLoading.update(()=>!1),this.snackbarService.openSnackBar("Password updated successfully. You will be redirected to login screen."),this.navigateToLogin()}))}handleUpdatePasswordFailure(){return this.actions$.pipe(F(Z),v(r=>{this.isLoading.update(()=>!1);let{error:i}=r;this.snackbarService.openSnackBar(i.message)}))}navigateToLogin(){setTimeout(()=>{this.router.navigate(["login"])},2e3)}};t.\u0275fac=function(i){return new(i||t)(p(b),p(M),p(ee),p(y))},t.\u0275cmp=h({type:t,selectors:[["app-update-password-form"]],standalone:!0,features:[E],decls:3,vars:2,consts:[["data-update-password-form","",1,"form","update-password-form-container",3,"ngSubmit","formGroup"],["data-spinner",""],[1,"form-group"],["aria-label","New Password"],["type","password","matInput","","aria-placeholder","enter new password","aria-required","true","placeholder","Enter new password","id","newPasswordField","data-new-password-field","",3,"formControl"],["aria-errormessage","newPasswordField","data-validate-email-error-field",""],["aria-invalid","New password is invalid","data-validate-email-error-field",""],["aria-label","Confirm Password"],["type","password","matInput","","aria-placeholder","enter new password","placeholder","Enter your new password to confirm","aria-required","true","data-confirm-password-field","",3,"formControl"],["aria-errormessage","Confirm Password is required","data-validate-email-error-field",""],["aria-invalid","Password doesnt match","data-validate-email-error-field",""],["aria-label","Update Password button","mat-flat-button","","color","primary","type","submit","data-update-password-btn","",1,"update-password-btn",3,"disabled"]],template:function(i,d){i&1&&(o(0,"form",0),C("ngSubmit",function(){return d.onSubmit()}),c(1,fe,1,0,"mat-spinner",1)(2,Ce,15,7),a()),i&2&&(u("formGroup",d.formGroup),n(),m(1,d.isLoading()?1:2))},dependencies:[N,L,V,T,G,I,q,P,B,k,D,O,j,x,$],styles:[".update-password-form-container[_ngcontent-%COMP%]{height:200px}.update-password-form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:90%}.update-password-form-container[_ngcontent-%COMP%]   .update-password-btn[_ngcontent-%COMP%]{width:100%!important}"]});let e=t;return e})();function _e(e,t){e&1&&f(0,"mat-spinner",1)}function Ee(e,t){e&1&&(o(0,"mat-error",5),l(1," Email is required "),a())}function Pe(e,t){e&1&&(o(0,"mat-error",7),l(1," Email is invalid "),a())}function Fe(e,t){if(e&1&&(o(0,"div",2)(1,"mat-form-field")(2,"mat-label",3),l(3,"Validate Email"),a(),f(4,"input",4),c(5,Ee,2,0,"mat-error",5)(6,Pe,2,0),a()(),o(7,"button",6),l(8,"Validate Email"),a()),e&2){let s=_();n(4),u("formControl",s.validateEmailField),n(),m(5,s.validateEmailField.hasError("required")?5:s.validateEmailField.hasError("pattern")?6:-1),n(2),u("disabled",!s.formGroup.valid)}}var re=(()=>{let t=class t{constructor(r,i,d){this.store$=r,this.actions$=i,this.snackService=d,this.emailValidated=new z,this.isLoading=g(!1),this.validateEmailField=new S("",[w.required,w.email]),this.formGroup=new U({validateEmailField:this.validateEmailField})}ngOnInit(){this.handleValidateEmailSuccess().subscribe(),this.handleValidateEmailError().subscribe()}onSubmit(){this.formGroup.valid&&(this.isLoading.update(()=>!0),this.store$.dispatch(J({email:this.validateEmailField.value})))}handleValidateEmailSuccess(){return this.actions$.pipe(F(K),v(()=>{this.isLoading.update(()=>!1),this.emailValidated.emit(!0)}))}handleValidateEmailError(){return this.actions$.pipe(F(Q),v(r=>{this.isLoading.update(()=>!1);let{error:i}=r;this.snackService.openSnackBar(i.message)}))}};t.\u0275fac=function(i){return new(i||t)(p(b),p(M),p(y))},t.\u0275cmp=h({type:t,selectors:[["app-validate-email-form"]],outputs:{emailValidated:"emailValidated"},standalone:!0,features:[E],decls:3,vars:2,consts:[["data-validate-email-form","",1,"validate-email-form-container",3,"ngSubmit","formGroup"],["data-spinner",""],[1,"form-group"],["mat-label","Validate Email"],["matInput","","aria-placeholder","Enter your email","placeholder","Enter your email","aria-required","true","id","validateEmailField","data-validate-email-field","",3,"formControl"],["aria-errormessage","validateEmailField","data-validate-email-error-field",""],["aria-label","Validate email button","mat-flat-button","","color","primary","type","submit","data-validate-email-btn","",1,"validate-email-btn",3,"disabled"],["aria-errormessage","validateEmailField","aria-invalid","true","data-validate-email-error-field",""]],template:function(i,d){i&1&&(o(0,"form",0),C("ngSubmit",function(){return d.onSubmit()}),c(1,_e,1,0,"mat-spinner",1)(2,Fe,9,3),a()),i&2&&(u("formGroup",d.formGroup),n(),m(1,d.isLoading()?1:2))},dependencies:[N,L,V,T,G,I,q,P,B,k,D,O,j,x,$],styles:[".validate-email-form-container[_ngcontent-%COMP%]   .validate-email-btn[_ngcontent-%COMP%]{width:100%!important}"]});let e=t;return e})();function Se(e,t){e&1&&f(0,"app-update-password-form")}function be(e,t){if(e&1){let s=H();o(0,"app-validate-email-form",2),C("emailValidated",function(i){A(s);let d=_();return Y(d.onEmailValidated(i))}),a()}}var Ze=(()=>{let t=class t{constructor(){this.showUpdatePasswordForm=g(!1)}onEmailValidated(r){r&&this.showUpdatePasswordForm.update(()=>!0)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=h({type:t,selectors:[["app-forgot-password"]],standalone:!0,features:[E],decls:5,vars:1,consts:[["data-forgot-password-container","",1,"forgot-password-container"],["aria-label","Forgot Password Section",1,"title"],[3,"emailValidated"]],template:function(i,d){i&1&&(o(0,"div",0)(1,"h1",1),l(2,"Forgot Password"),a(),c(3,Se,1,0,"app-update-password-form")(4,be,1,0),a()),i&2&&(n(3),m(3,d.showUpdatePasswordForm()?3:4))},dependencies:[oe,re,te,P],styles:[".forgot-password-container[_ngcontent-%COMP%]{align-items:center;display:flex;height:100vh;justify-content:center;width:100vw;flex-direction:column}"]});let e=t;return e})();export{Ze as ForgotPasswordComponent};
